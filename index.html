<!DOCTYPE html>
<html>
<body style="background-color: #F3F3F3;">

<canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3; margin-top: 10px; margin-bottom: 10px;">
Your browser does not support the HTML5 canvas tag.</canvas>

<button id="playButton" onclick="togglePlayPause()" style="width: 80px; height: 40px;">Play</button>
<button id="resetButton" onclick="reset()" style="width: 80px; height: 40px;">Reset</button>

<script>
const N = 50;
let grid = Array.from({length: N}, () => Array.from({length: N}, () => 0));
let canvas = document.getElementById('myCanvas');
let ctx = canvas.getContext('2d');
let isPlaying = false;

canvas.addEventListener('click', function(evt) {
    let x = Math.floor(evt.offsetX / 10);
    let y = Math.floor(evt.offsetY / 10);
    grid[y][x] = grid[y][x] ? 0 : 1;  // toggle cell state
    draw();
}, false);

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for(let i=0; i<N; i++) {
        for(let j=0; j<N; j++) {
            ctx.fillStyle = grid[i][j] === 1 ? '#007BFF' : '#FFFFFF'; // live cells are blue, dead cells are white
            ctx.fillRect(10*j, 10*i, 10, 10);
        }
    }
}

function update() {
    let newGrid = JSON.parse(JSON.stringify(grid));
    for(let i=0; i<N; i++) {
        for(let j=0; j<N; j++) {
            let neighbors = [
                grid[(i-1+N)%N][(j-1+N)%N], grid[(i-1+N)%N][j], grid[(i-1+N)%N][(j+1)%N],
                grid[i][(j-1+N)%N],                             grid[i][(j+1)%N],
                grid[(i+1)%N][(j-1+N)%N], grid[(i+1)%N][j], grid[(i+1)%N][(j+1)%N]
            ].reduce((a, b) => a + b);
            newGrid[i][j] = (grid[i][j] === 1) ? ((neighbors === 2 || neighbors === 3) ? 1 : 0) : ((neighbors === 3) ? 1 : 0);
        }
    }
    grid = newGrid;
    draw();
}

function togglePlayPause() {
    isPlaying = !isPlaying;
    document.getElementById("playButton").innerText = isPlaying ? "Pause" : "Play";
}

function reset() {
    grid = Array.from({length: N}, () => Array.from({length: N}, () => 0));
    draw();
}

setInterval(() => {
    if(isPlaying) {
        update();
    }
}, 100);
</script>

</body>
</html>
